import{_ as y}from"./error.3d32ec62.js";import{h as B}from"./element-plus.bf9fa066.js";import{b as E,c as k,d as x,_ as b}from"./footer.aa81ba97.js";import{s as c}from"./index.645abaa1.js";import{a as l}from"./dayjs.2da0dfc5.js";import{k as w,d as T,B as g,ah as h,o as n,c as r,a as F,J as I,b as d,I as D,Q as V,u as U}from"./@vue.93d749de.js";const N=()=>({sendTime:()=>{const e=c.get("codeSendTime");return e?60-l().diff(e,"second"):-1},sendCode:async(e,s="any")=>{switch(s){case"exist":await x(e);break;case"notExist":await k(e);break;default:await E(e)}c.set("codeSendTime",l())}}),S={class:""},j={class:"flex justify-between items-center"},A={key:0},q={key:1},M=w({__name:"validateCode",props:{account:{default:""},code:{default:""},type:{default:"any"}},emits:["update:code"],setup(i,{emit:u}){const e=i,{sendCode:s,sendTime:m}=N(),t=T(0),p=setInterval(()=>t.value=m(),100);return g(()=>clearInterval(p)),(z,o)=>{const _=b,f=B,C=y,v=h("clearError");return n(),r("div",S,[F("div",j,[I(d(_,{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",modelValue:e.code,"onUpdate:modelValue":o[0]||(o[0]=a=>e.code=a),class:"mr-1",required:"",onInput:o[1]||(o[1]=a=>u("update:code",a.target.value))},null,8,["modelValue"]),[[v,"code"]]),d(f,{disabled:t.value>0,onClick:o[2]||(o[2]=()=>U(s)(e.account,e.type)),class:"ml-1",plain:"",size:"large",shape:"circle"},{default:D(()=>[t.value>0?(n(),r("span",A,"\u8BF7"+V(t.value)+"\u540E\u64CD\u4F5C",1)):(n(),r("span",q,"\u53D1\u9001\u9A8C\u8BC1\u7801"))]),_:1},8,["disabled"])]),d(C,{name:"code"})])}}});export{M as _};
